/*
    Variables Bootstrap :
    Tables, Options, Body, Fonts, Navbar, Breadcrumbs...
 */
$white: #fff !default;
$gray-100: #f8f9fa !default;
$gray-200: #e9ecef !default;
$gray-300: #dee2e6 !default;
$gray-400: #ced4da !default;
$gray-500: #8f959e !default;
$gray-600: #6a737b !default;
$gray-700: #495057 !default;
$gray-800: #343a40 !default;
$gray-900: #1d2125 !default;
$black: #000 !default;

$blue: #0f6cbf !default;
$indigo: #6610f2 !default;
$purple: #613d7c !default;
$pink: #e83e8c !default;
$red: #ca3120 !default;
$orange: #f0ad4e !default;
$yellow: #ff7518 !default;
$green: #357a32 !default;
$teal: #20c997 !default;
$cyan: #008196 !default;

$primary: $orange !default;
$success: $green !default;
$info: $cyan !default;
$warning: $orange !default;
$danger: $red !default;
$secondary: $gray-400 !default;

$info-outline: #1f7e9a;
$warning-outline: #a6670e;

// Tables
$table-accent-bg: rgba($black, .03) !default;

// Options
$enable-responsive-font-sizes: true !default;

// Body
$body-color: $gray-900 !default;

// Fonts
$font-size-base: 0.9375rem !default;
$rfs-base-font-size: 0.9rem !default;
$headings-font-weight: 700 !default;

// Navbar
$navbar-dark-hover-color: rgba($white, 1) !default;
$navbar-light-color: rgba($black, 0.6) !default;
$navbar-light-hover-color: rgba($black, .9) !default;

// Breadcrumbs
$breadcrumb-padding-y: .5rem !default;
$breadcrumb-padding-x: 0 !default;
$breadcrumb-item-padding: .5rem !default;
$breadcrumb-margin-bottom: 0 !default;
$breadcrumb-bg: transparent !default;
$breadcrumb-divider: "/" !default;
$breadcrumb-divider-rtl: "/" !default;

// Alerts
$alert-border-width: 0 !default;

$card-group-margin: .25rem;

// Toasts
$toast-color: $white !default;
$toast-background-color: rgba($gray-900, .95) !default;
$toast-header-color: $gray-100 !default;
$toast-header-background-color: rgba($white, .1) !default;

// Custom control size
$custom-control-indicator-size: 1.25rem;

$input-btn-focus-color: rgba($primary, .75) !default;

$input-border-color: $gray-500 !default;

$dropdown-link-hover-color: $white;
$dropdown-link-hover-bg: $primary;

$popover-max-width: 300px !default;

$border-radius: .5rem !default;
$border-radius-lg: .6rem !default;

// stylelint-disable
$theme-colors: () !default;
$theme-colors: map-merge((
    primary: $primary,
    secondary: $secondary,
    success: $success,
    info: $info,
    warning: $warning,
    danger: $danger,
), $theme-colors);
// stylelint-enable

$spacer: 1rem !default;
$spacers: (
    0: 0,
    1: ($spacer * .25),
    2: ($spacer * .5),
    3: $spacer,
    4: ($spacer * 1.5),
    5: ($spacer * 2),
    6: ($spacer * 3)
) !default;

/*
    Les imports :
    "fontawesome", "bootstrap" et "moodle" sont hérités du thème Boost. Ne pas modifier.
    "variables" (_variables.scss) est spécifique à Apsolu et ajoute des variables personnalisées. Peut être modifié.
 */
// Import FontAwesome.
@import "fontawesome";
// Import All of Bootstrap
@import "bootstrap";
// Import Core moodle CSS
@import "moodle";
// Variables custom Apsolu.
@import "variables";

/*
    Preset pour Apsolu :
    Règles de styles nécessaires à l'affichage de la page d'accueil et du thème APSOLU de manière générale.
 */

// 1. Elements généraux.
body {
    min-height: 100%;
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

html {
    height: 100%;
}

#page-content.blocks-pre .region-main #region-main {
    padding-top: 0; /* Important: évite le décalage des blocs dans le menu d'administration */
}

// 1a. Boutons.
.btn-outline-secondary {
    @include button-outline-variant($gray-600);
    border-color: $gray-600;
}

.btn-outline-info {
    @include button-outline-variant($info-outline);
}

.btn-outline-warning {
    @include button-outline-variant($warning-outline);
}

.btn-activite {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.btn-info {
    border-bottom: 2px solid darken($info, 10%);
}

.btn-primary {
    border-bottom: 2px solid darken($primary, 10%);
}

.btn-secondary {
    border-bottom: 2px solid darken($secondary, 10%);
    outline: 0;
}

.btn-success {
    border-bottom: 2px solid darken($success, 10%);
}

.btn-warning {
    border-bottom: 2px solid darken($warning, 10%);
}
// 1b. Liens.
#page-site-index #region-main .apsolu-article p a {
    color: $custom-color-3;
}
#page-site-index #region-main .apsolu-article .btn a {
    color: unset;
}

#page-site-index #region-main .nav-tabs .nav-link {
    color: unset !important;
}

#page-site-index #region-main .nav-tabs .nav-link.disabled {
    color: $gray-800 !important;
}

// 2. Navigation.
$navbar-height: 50px;
$moremenu-height: 50px;

.navbar {
    box-shadow: 0 2px 4px rgba(0, 0, 0, .08);
}

.navbar.fixed-top {
    border-bottom: none;
    height: auto; // Important : permet au menu déroulant d'avoir un fond sur viewport réduit.
}

.primary-navigation .navigation .nav-link {
    color: white;
}

.navbar-header .guest {
    display: none;
}

.dropdown-menu {
    // Placeholder.
}

.apsolu-navbar {
    min-height: 50px;
    padding: unset; /* Important: permet au brand de prendre toute la hauteur */
}

#apsolu-header-navbar.apsolu-navbar {
    padding-left: 0;
}

#apsolu-header-navbar.navbar.fixed-top {
    color: white;
    padding-right: 1em;
}

#apsolu-homepage-navbar.navbar.fixed-top {
    background: $custom_color_2;
    color: white;
    border-top: 4px solid $custom-color-1;
    margin-top: 50px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, .1);
}

// 3. Page d'accueil.
// 3a. Affichage de la page.
#page-site-index {
    height: 100%;
    margin: 0;
    padding: 0;
}

#page-site-index #page-content {
    display: block;
}

#page-site-index #page-content.blocks-pre .region-main #region-main {
    padding: 0; /* Important: permet d'afficher l'accueil sur 100% de la largueur (MOODLE 4.*) */
}

#page-login-index #apsolu-topofbody,
#page-site-index #apsolu-topofbody,
#page-site-index #page-header,
#page-site-index #page-content > .columnleft,
#page-site-index #page-content > .columnright,
#page-site-index #apsolu-page ~ *,
#page-site-index #page-footer {
    display: none; /* Masque les annonces, le header, les blocs et le footer sur la page d'accueil. */
}

#page-site-index {
    padding-top: 99px; /* Important: permet à l'en-tête de ne pas empiéter sur la photo d'accueil */
}

#page-site-index #page,
#page-site-index #region-main {
    margin: 0;
    padding: 0;
}

#page-site-index #page-content.blocks-pre .region-main {
    flex: 0 0 100%;
    max-width: none;
}

#page-content.blocks-pre .region-main #region-main {
    border: none; /* Important : évite la bordure blanche par défaut */
}

#page-site-index #page,
#page-site-index #page-content,
#page-site-index #region-main-box,
#page-site-index #region-main,
#page-site-index #region-main > div,
#apsolu-page {
    display: block;
    float: none;
    left: 0;
    margin: 0;
    max-width: 100%;
    padding: 0;
    scroll-behavior: smooth;
    width: 100%;
}

// 3b. Affichage des infos de l'instance dans la barre de navigation.
.apsolu-brand {
    padding-left: 0.5em;
    padding-right: 0.5em;
    padding-bottom: 0;
    min-height: 50px; /* Important : force le nom de l'instance à prendre toute la hauteur quand le logo n'est pas affiché. */
}

.apsolu-brand a:hover {
    text-decoration: none;
}

nav.navbar .logo img {
    max-height: 2em;
}

.navbar-brand {
    font-size: 1.5em;
    line-height: inherit;
    white-space: nowrap;
}

// 3c. Affichage des titres de sections.
.apsolu-article-title {
    //background: $gray-500;
    background: rgba(80, 80, 80, 0.8);
    //webkit-backdrop-filter: blur(10px);
    //-webkit-backdrop-filter: blur(10px); // Safari (9+).
    //backdrop-filter: blur(10px); // Chromium (76+) & Firefox (103+).
    padding: 1em;
    clear:both;
}

.apsolu-article-title h2 {
    color: $white;
    text-transform: uppercase;
    font-size: 1.5em;
    position: relative;
}

// 3d. Affichage des sections.
.apsolu-article {
    //background: #f2f2f290;
    background: rgba(255, 255, 255, 0.2);
    padding: 2em;
    backdrop-filter: blur(8px);
}
section .badge {
    line-height:normal;
}

.apsolu-article .nav-tabs .nav-link {
    margin-bottom: -1px;
    border-radius: unset;
}

.apsolu-article .nav-tabs .nav-link:first-child {
    border-left: none;
}

.apsolu-article .nav-tabs {
}
#accueil.apsolu-article {

}

#formats-cours {
    background: white;
    box-shadow: rgba(17, 17, 26, 0.05) 0px 4px 16px, rgba(17, 17, 26, 0.05) 0px 8px 32px;
}

#formats-cours .tab-content {
    padding: 1em;
}

#formats-cours .alert-light {
    background-color: $gray-200;
    border-left: 15px solid $gray-300;
}

#adhesion.apsolu-article {

}

#inscription.apsolu-article {

}

// 3e. Affichage des blocs images.
#page-site-index .apsolu-images {
    background-attachment: fixed;
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
    display: block;
    min-height: 100%;
    overflow: hidden;
    padding-top: 5%;
}

/* Résolutions inférieures à 480px de large. */
@media (max-width: 479px) {
    #page-site-index #section-1.apsolu-images {
        background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_1_240x160]]');
        height: 160px;
    }

    #page-site-index #section-2.apsolu-images {
        background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_2_240x160]]');
        height: 160px;
    }

    #page-site-index #section-3.apsolu-images {
        background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_3_240x160]]');
        height: 160px;
    }
}

/* Résolutions supérieures ou égales à 480px de large. */
@media (min-width: 480px) {
    #page-site-index #section-1.apsolu-images {
        background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_1_480x320]]');
        height: 320px;
    }

    #page-site-index #section-2.apsolu-images {
        background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_2_480x320]]');
        height: 320px;
    }

    #page-site-index #section-3.apsolu-images {
        background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_3_480x320]]');
        height: 320px;
    }
}

/* Résolutions supérieures ou égales à 1024px de large. */
@media (min-width: 1024px) {
    #page-site-index #section-1.apsolu-images {
        background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_1_960x640]]');
        height: 50vh;
    }

    #page-site-index #section-2.apsolu-images {
        background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_2_960x640]]');
        height: 50vh;
    }

    #page-site-index #section-3.apsolu-images {
        background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_3_960x640]]');
        height: 50vh;
    }
}

/* Homepage: crédits photos */
.apsolu-photo-credits {
    margin: 0.8em;
    padding: 0.5em 0.5em 0.5em 0.5em;
    background: rgba(255, 255, 255, 0.8);
    display: inline-block;
    font-size: .8em;
}

.apsolu-photo-credits p {
    margin: 0;
}

.apsolu-photo-credits a {
    text-decoration: underline;
}

// 3e. Section: Activites.
#apsolu-activities-list-ul {
    margin-bottom: 0;
}

#apsolu-activities-list-ul .list-group-item {
    padding: .2em .5em;
}

.apsolu-homepage-activities-items-span {
    display: block;
    padding: .5em 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    word-break: break-all;
}

// 3f. Affichage du pied de page.
#apsolu-custom-footer-1 {
}

#apsolu-custom-footer-1 .container {
    padding: 2em;
}

#apsolu-custom-footer-2  {
    background-color: $custom-color-1;
}

footer .footer-dark {
    color: rgba(255, 255, 255, 0.8);
}

footer .footer-classic a, .footer-classic a:focus, .footer-classic a:active {
    color: #ffffff;
}
footer .nav-list li {
    padding-top: 5px;
    padding-bottom: 5px;
    list-style: none;
}

footer .nav-list li a:hover:before {
    margin-left: 0;
    opacity: 1;
    visibility: visible;
}

footer ul, ol {
    list-style: none;
    padding: 0;
    margin: 0;
}

footer .modal-inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    padding: 1.25em;
    font: 900 13px/1 "Lato", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    text-transform: uppercase;
    color: rgba(255, 255, 255, 0.5);
}
footer .modal-container .col {
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Homepage: inscription. */
.apsolu-inscription {
    text-align: center;
    list-style: none;
    margin: 0;
    padding: 0;
}

.apsolu-inscription a {
    white-space: normal;
    margin-top: 20px;
}

//.apsolu-register-dl {
//    margin-left: 2em;
//}
//
//.apsolu-register-dt,
//.apsolu-register-dd {
//    display: inline;
//}
//
//.apsolu-register-dt:after {
//    content: ' : ';
//}

// 4. Page de connexion.
.pagelayout-login #page {
    background-image: url('[[THEME_APSOLU:BACKGROUND_IMAGE_1_960x640]]');
    background-size: 100% 100%;
    background-repeat: no-repeat;
    background-position: left top;
}

#page-login-index .potentialidp {
    margin: 1em 0;
}

#page-login-index .potentialidp img {
    display: none;
}

#page-auth-shibboleth-login #region-main .card.mt-1 {
    display: none;
}

// 5. Personnalisation des couleurs.
.apsolu-link-dark a {
    color: black;
}

.apsolu-link-light a {
    color: white;
}

.dropdown-menu a {
    color: #004d40;
}

.apsolu-link-custom a {
    color: blue;
}

.apsolu-color-custom-1 {
    background-color: $custom-color-1;
}

.apsolu-color-custom-2 {
    background-color: $custom-color-2;
}


// 6. Divers.
// 6a. Affichage de l'avatar utilisateur.
.userpicture {
    border-radius: 50%;
}

// 6b. Affichage des éditeurs de texte.
.editor_atto_content[contenteditable=false] {
    background-color: #e9ecef;
    cursor: not-allowed;
}

// 6c. Affichage des logos sur l'instance du SIUAPS Rennes.
#apsolu-logo-div {
    align-items: center;
    display: flex;
    margin-bottom: 2em;
}

#logo-siuaps-div img {
    height: auto;
    width: 45%;
}

#logo-rennes1-div img {
    height: auto;
    width: 75%;
}

#logo-rennes2-div img {
    height: auto;
    width: 45%;
}

#page-site-index .modal-body {
    overflow-y: auto !important;
    max-height: 80vh;
    scrollbar-width: thin;
}


/**
 *Commente le !important pour passer le test de coding style.
 *Trouver une solution pour améliorer l'affichage de la politique du site.
 */

/*
#page-user-policy #resourceobject {
    height: 1000px !important;
}
*/
